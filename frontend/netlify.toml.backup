[build]
  publish = "dist"
  command = "yarn build"

[build.environment]
DISABLE_PYTHON = "true"
DISABLE_MISE = "true"

[functions]
  directory = "netlify/functions"

# Form notifications
[[form]]
  name = "contact"
  action = "/contact-success"

  [form.settings]
    send_confirmation = true
    confirmation_template = "contact-confirmation"

  [[form.notification]]
    type = "email"
    event = "submission"
    to = "${CONTACT_EMAIL}"
    subject = "${CONTACT_NOTIFICATION_SUBJECT}"
    body = """
    You have received a new contact form submission:

    Name: {{name}}
    Email: {{email}}
    Message: {{message}}

    Submitted at: {{created_at}}
    """

# Environment Variables by Deploy Context
# NOTE: Generated automatically from feature-flags.config.ts - do not edit manually

# Production context (main branch)
[context.production.environment]
  PUBLIC_ENV = "production"
  PUBLIC_FEATURE_SEARCH = "true"
  PUBLIC_FEATURE_THEME_SWITCHER = "true"
  PUBLIC_FEATURE_COMMENTS = "false"
  PUBLIC_FEATURE_GTM = "true"
  PUBLIC_FEATURE_CALCULATORS = "false"
  PUBLIC_FEATURE_CALCULATOR_ADVANCED = "false"
  PUBLIC_FEATURE_ELEMENTS_PAGE = "false"
  PUBLIC_FEATURE_AUTHORS_PAGE = "false"
  PUBLIC_FEATURE_CHARTS_PAGE = "false"
  PUBLIC_FEATURE_PHOTO_BOOTH = "false"

# Branch deploy context (staging and other branches)
[context.branch-deploy.environment]
  PUBLIC_ENV = "staging"
  PUBLIC_FEATURE_SEARCH = "true"
  PUBLIC_FEATURE_THEME_SWITCHER = "true"
  PUBLIC_FEATURE_COMMENTS = "false"
  PUBLIC_FEATURE_GTM = "false"
  PUBLIC_FEATURE_CALCULATORS = "false"
  PUBLIC_FEATURE_CALCULATOR_ADVANCED = "true"
  PUBLIC_FEATURE_ELEMENTS_PAGE = "true"
  PUBLIC_FEATURE_AUTHORS_PAGE = "true"
  PUBLIC_FEATURE_CHARTS_PAGE = "true"
  PUBLIC_FEATURE_RESUME_PAGE = "true"
  PUBLIC_FEATURE_PHOTO_BOOTH = "true"

# Deploy preview context (pull requests)
[context.deploy-preview.environment]
  PUBLIC_ENV = "staging"
  PUBLIC_FEATURE_SEARCH = "true"
  PUBLIC_FEATURE_THEME_SWITCHER = "true"
  PUBLIC_FEATURE_COMMENTS = "false"
  PUBLIC_FEATURE_GTM = "false"
  PUBLIC_FEATURE_CALCULATORS = "false"
  PUBLIC_FEATURE_CALCULATOR_ADVANCED = "true"
  PUBLIC_FEATURE_ELEMENTS_PAGE = "true"
  PUBLIC_FEATURE_AUTHORS_PAGE = "true"
  PUBLIC_FEATURE_CHARTS_PAGE = "true"
  PUBLIC_FEATURE_RESUME_PAGE = "true"
  PUBLIC_FEATURE_PHOTO_BOOTH = "true"
