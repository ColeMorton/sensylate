{
  "version": "1.0.0",
  "description": "Chart Data Dependency Configuration - defines data sources, refresh policies, and staleness tolerances for each chart type",
  "settings": {
    "defaultCacheDuration": 300000,
    "enableFileWatching": true,
    "enableCLIDiscovery": true,
    "maxConcurrentRefresh": 3
  },
  "dependencies": {
    "apple-stock": {
      "chartType": "apple-stock",
      "primarySource": {
        "type": "static",
        "location": "https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv",
        "refreshMethod": "never",
        "frequency": "never",
        "metadata": {
          "description": "Historical Apple stock data for demo purposes",
          "format": "csv",
          "lastUpdatedBy": "static-dataset"
        }
      },
      "freshness": {
        "warningThreshold": 8760,
        "errorThreshold": 17520,
        "blockOnStale": false,
        "manualGracePeriod": 8760
      },
      "refreshPolicy": {
        "autoRefresh": false,
        "allowManualRefresh": false,
        "refreshOnVisible": false,
        "maxRetries": 0,
        "retryBackoff": "linear"
      }
    },
    "portfolio-value-comparison": {
      "chartType": "portfolio-value-comparison",
      "primarySource": {
        "type": "manual",
        "location": [
          "/data/portfolio/multi_strategy_portfolio_portfolio_value.csv",
          "/data/portfolio/portfolio_buy_and_hold_portfolio_value.csv"
        ],
        "refreshMethod": "file-watch",
        "frequency": "event-driven",
        "metadata": {
          "description": "Portfolio value data generated by trading system",
          "format": "csv",
          "lastUpdatedBy": "portfolio-engine"
        }
      },
      "freshness": {
        "warningThreshold": 24,
        "errorThreshold": 72,
        "blockOnStale": false,
        "manualGracePeriod": 48
      },
      "refreshPolicy": {
        "autoRefresh": false,
        "allowManualRefresh": true,
        "refreshOnVisible": true,
        "maxRetries": 1,
        "retryBackoff": "linear"
      }
    },
    "returns-comparison": {
      "chartType": "returns-comparison",
      "primarySource": {
        "type": "manual",
        "location": [
          "/data/portfolio/multi_strategy_portfolio_returns.csv",
          "/data/portfolio/portfolio_buy_and_hold_returns.csv"
        ],
        "refreshMethod": "file-watch",
        "frequency": "event-driven",
        "metadata": {
          "description": "Portfolio returns data generated by trading system",
          "format": "csv"
        }
      },
      "freshness": {
        "warningThreshold": 24,
        "errorThreshold": 72,
        "blockOnStale": false,
        "manualGracePeriod": 48
      },
      "refreshPolicy": {
        "autoRefresh": false,
        "allowManualRefresh": true,
        "refreshOnVisible": true,
        "maxRetries": 1,
        "retryBackoff": "linear"
      }
    },
    "portfolio-drawdowns": {
      "chartType": "portfolio-drawdowns",
      "primarySource": {
        "type": "manual",
        "location": "/data/portfolio/multi_strategy_portfolio_drawdowns.csv",
        "refreshMethod": "file-watch",
        "frequency": "event-driven",
        "metadata": {
          "description": "Portfolio drawdown analysis generated by trading system",
          "format": "csv"
        }
      },
      "freshness": {
        "warningThreshold": 24,
        "errorThreshold": 72,
        "blockOnStale": false,
        "manualGracePeriod": 48
      },
      "refreshPolicy": {
        "autoRefresh": false,
        "allowManualRefresh": true,
        "refreshOnVisible": true,
        "maxRetries": 1,
        "retryBackoff": "linear"
      }
    },
    "live-signals-equity-curve": {
      "chartType": "live-signals-equity-curve",
      "primarySource": {
        "type": "manual",
        "location": "/data/portfolio/live-signals/live_signals_equity.csv",
        "refreshMethod": "file-watch",
        "frequency": "event-driven",
        "metadata": {
          "description": "Live signals portfolio equity curve - manually updated from external trading system",
          "format": "csv",
          "lastUpdatedBy": "live-signals-system"
        }
      },
      "freshness": {
        "warningThreshold": 4,
        "errorThreshold": 12,
        "blockOnStale": false,
        "manualGracePeriod": 8
      },
      "refreshPolicy": {
        "autoRefresh": false,
        "allowManualRefresh": true,
        "refreshOnVisible": true,
        "maxRetries": 2,
        "retryBackoff": "exponential"
      }
    },
    "live-signals-benchmark-comparison": {
      "chartType": "live-signals-benchmark-comparison",
      "primarySource": {
        "type": "hybrid",
        "location": "/data/portfolio/live_signals_benchmark_comparison.csv",
        "refreshMethod": "hybrid-sync",
        "frequency": "scheduled",
        "cliService": "yahoo-finance",
        "metadata": {
          "description": "Live signals vs market benchmarks - combines manual portfolio data with API market data",
          "format": "csv"
        }
      },
      "fallbackSources": [
        {
          "type": "cli-api",
          "location": "market-benchmarks",
          "refreshMethod": "api-poll",
          "frequency": "real-time",
          "cliService": "yahoo-finance",
          "metadata": {
            "description": "Market benchmark data from Yahoo Finance API",
            "format": "api"
          }
        }
      ],
      "freshness": {
        "warningThreshold": 2,
        "errorThreshold": 6,
        "blockOnStale": false,
        "manualGracePeriod": 4
      },
      "refreshPolicy": {
        "autoRefresh": true,
        "refreshInterval": 900000,
        "allowManualRefresh": true,
        "refreshOnVisible": true,
        "maxRetries": 3,
        "retryBackoff": "exponential"
      }
    },
    "live-signals-drawdowns": {
      "chartType": "live-signals-drawdowns",
      "primarySource": {
        "type": "manual",
        "location": "/data/portfolio/live-signals/live_signals_equity.csv",
        "refreshMethod": "file-watch",
        "frequency": "event-driven",
        "metadata": {
          "description": "Live signals drawdown data derived from equity curve",
          "format": "csv"
        }
      },
      "freshness": {
        "warningThreshold": 4,
        "errorThreshold": 12,
        "blockOnStale": false,
        "manualGracePeriod": 8
      },
      "refreshPolicy": {
        "autoRefresh": false,
        "allowManualRefresh": true,
        "refreshOnVisible": true,
        "maxRetries": 1,
        "retryBackoff": "linear"
      }
    },
    "live-signals-weekly-candlestick": {
      "chartType": "live-signals-weekly-candlestick",
      "primarySource": {
        "type": "manual",
        "location": "/data/portfolio/live-signals/live_signals_equity.csv",
        "refreshMethod": "file-watch",
        "frequency": "event-driven",
        "metadata": {
          "description": "Weekly candlestick chart derived from daily live signals equity data",
          "format": "csv"
        }
      },
      "freshness": {
        "warningThreshold": 4,
        "errorThreshold": 12,
        "blockOnStale": false,
        "manualGracePeriod": 8
      },
      "refreshPolicy": {
        "autoRefresh": false,
        "allowManualRefresh": true,
        "refreshOnVisible": true,
        "maxRetries": 1,
        "retryBackoff": "linear"
      }
    },
    "trade-pnl-waterfall": {
      "chartType": "trade-pnl-waterfall",
      "primarySource": {
        "type": "manual",
        "location": "/data/trade-history/trade_pnl_waterfall_sorted.csv",
        "refreshMethod": "file-watch",
        "frequency": "event-driven",
        "metadata": {
          "description": "Pre-sorted trade PnL waterfall data generated by backend analysis",
          "format": "csv",
          "lastUpdatedBy": "trade-analysis-engine"
        }
      },
      "fallbackSources": [
        {
          "type": "manual",
          "location": "/data/trade-history/live_signals.csv",
          "refreshMethod": "file-watch",
          "frequency": "event-driven",
          "metadata": {
            "description": "Raw trade history data (fallback)",
            "format": "csv"
          }
        }
      ],
      "freshness": {
        "warningThreshold": 6,
        "errorThreshold": 24,
        "blockOnStale": false,
        "manualGracePeriod": 12
      },
      "refreshPolicy": {
        "autoRefresh": false,
        "allowManualRefresh": true,
        "refreshOnVisible": true,
        "maxRetries": 2,
        "retryBackoff": "linear"
      }
    },
    "open-positions-pnl-timeseries": {
      "chartType": "open-positions-pnl-timeseries",
      "primarySource": {
        "type": "hybrid",
        "location": "/data/portfolio/open_positions_pnl_current.csv",
        "refreshMethod": "hybrid-sync",
        "frequency": "scheduled",
        "cliService": "yahoo-finance",
        "metadata": {
          "description": "Current open positions with real-time pricing updates",
          "format": "csv"
        }
      },
      "fallbackSources": [
        {
          "type": "cli-api",
          "location": "position-pricing",
          "refreshMethod": "api-poll",
          "frequency": "real-time",
          "cliService": "yahoo-finance",
          "metadata": {
            "description": "Real-time position pricing from Yahoo Finance",
            "format": "api"
          }
        }
      ],
      "freshness": {
        "warningThreshold": 1,
        "errorThreshold": 4,
        "blockOnStale": false,
        "manualGracePeriod": 2
      },
      "refreshPolicy": {
        "autoRefresh": true,
        "refreshInterval": 300000,
        "allowManualRefresh": true,
        "refreshOnVisible": true,
        "maxRetries": 3,
        "retryBackoff": "exponential"
      }
    },
    "closed-positions-pnl-timeseries": {
      "chartType": "closed-positions-pnl-timeseries",
      "primarySource": {
        "type": "manual",
        "location": "/data/portfolio/closed_positions_pnl_progression.csv",
        "refreshMethod": "file-watch",
        "frequency": "event-driven",
        "metadata": {
          "description": "Historical closed positions PnL progression with real price data",
          "format": "csv",
          "lastUpdatedBy": "position-analysis-engine"
        }
      },
      "freshness": {
        "warningThreshold": 12,
        "errorThreshold": 48,
        "blockOnStale": false,
        "manualGracePeriod": 24
      },
      "refreshPolicy": {
        "autoRefresh": false,
        "allowManualRefresh": true,
        "refreshOnVisible": true,
        "maxRetries": 1,
        "retryBackoff": "linear"
      }
    }
  },
  "cliServices": {
    "yahoo-finance": {
      "name": "Yahoo Finance CLI",
      "description": "Real-time and historical market data",
      "scriptPath": "scripts/yahoo_finance_cli.py",
      "capabilities": ["stock-prices", "market-data", "benchmarks"],
      "rateLimits": {
        "requestsPerMinute": 60,
        "requestsPerHour": 2000
      }
    },
    "fmp": {
      "name": "Financial Modeling Prep CLI",
      "description": "Advanced financial data and fundamentals",
      "scriptPath": "scripts/fmp_cli.py",
      "capabilities": ["fundamentals", "financial-statements", "market-data"],
      "rateLimits": {
        "requestsPerMinute": 300,
        "requestsPerHour": 10000
      }
    },
    "alpha-vantage": {
      "name": "Alpha Vantage CLI",
      "description": "Financial market data and technical indicators",
      "scriptPath": "scripts/alpha_vantage_cli.py",
      "capabilities": ["stock-prices", "technical-indicators", "market-data"],
      "rateLimits": {
        "requestsPerMinute": 5,
        "requestsPerHour": 500
      }
    },
    "coingecko": {
      "name": "CoinGecko CLI",
      "description": "Cryptocurrency market data",
      "scriptPath": "scripts/coingecko_cli.py",
      "capabilities": ["crypto-prices", "market-data"],
      "rateLimits": {
        "requestsPerMinute": 10,
        "requestsPerHour": 1000
      }
    }
  },
  "refreshSchedules": {
    "market-hours": {
      "description": "Active during market hours (9:30 AM - 4:00 PM EST)",
      "enabled": true,
      "timezone": "America/New_York",
      "schedule": [
        { "day": "monday", "start": "09:30", "end": "16:00" },
        { "day": "tuesday", "start": "09:30", "end": "16:00" },
        { "day": "wednesday", "start": "09:30", "end": "16:00" },
        { "day": "thursday", "start": "09:30", "end": "16:00" },
        { "day": "friday", "start": "09:30", "end": "16:00" }
      ]
    },
    "extended-hours": {
      "description": "Extended hours including pre-market and after-hours",
      "enabled": false,
      "timezone": "America/New_York",
      "schedule": [
        { "day": "monday", "start": "04:00", "end": "20:00" },
        { "day": "tuesday", "start": "04:00", "end": "20:00" },
        { "day": "wednesday", "start": "04:00", "end": "20:00" },
        { "day": "thursday", "start": "04:00", "end": "20:00" },
        { "day": "friday", "start": "04:00", "end": "20:00" }
      ]
    },
    "24-7": {
      "description": "Continuous updates for cryptocurrency and global markets",
      "enabled": true,
      "timezone": "UTC",
      "schedule": [{ "day": "all", "start": "00:00", "end": "23:59" }]
    }
  }
}
