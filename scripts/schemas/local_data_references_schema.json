{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://sensylate.com/schemas/local_data_references.json",
  "title": "Local Data References Schema",
  "description": "Reusable schema for systematic discovery and referencing of related files from the ./data/ knowledge domain across all analysis types",
  "type": "object",
  "required": [
    "search_methodology",
    "discovered_files",
    "search_coverage",
    "relevance_assessment"
  ],
  "additionalProperties": false,
  "properties": {
    "search_methodology": {
      "type": "object",
      "description": "Documentation of systematic search approach and coverage",
      "required": [
        "search_patterns",
        "directories_searched",
        "file_types_evaluated",
        "temporal_scope"
      ],
      "additionalProperties": false,
      "properties": {
        "search_patterns": {
          "type": "array",
          "minItems": 3,
          "items": {
            "type": "string"
          },
          "description": "Search patterns used (ticker-based, sector-based, date-based, analysis-type-based)"
        },
        "directories_searched": {
          "type": "array",
          "minItems": 2,
          "items": {
            "type": "string"
          },
          "description": "Directory paths systematically searched"
        },
        "file_types_evaluated": {
          "type": "array",
          "minItems": 3,
          "items": {
            "type": "string",
            "enum": ["json", "md", "csv", "txt", "yaml"]
          },
          "description": "File types included in search scope"
        },
        "temporal_scope": {
          "type": "string",
          "description": "Temporal range considered for relevance assessment"
        }
      }
    },
    "discovered_files": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "filepath",
          "relevance_score",
          "relationship_type",
          "file_description",
          "accessibility_verified"
        ],
        "additionalProperties": false,
        "properties": {
          "filepath": {
            "type": "string",
            "pattern": "^\\./data/",
            "description": "Relative filepath from project root (must start with ./data/)"
          },
          "relevance_score": {
            "type": "number",
            "minimum": 0.7,
            "maximum": 1.0,
            "description": "Relevance confidence score (minimum 0.7 for institutional grade)"
          },
          "relationship_type": {
            "type": "string",
            "enum": [
              "direct_analysis",
              "peer_analysis",
              "sector_context",
              "historical_analysis",
              "validation_data",
              "supporting_data",
              "cross_reference",
              "direct_sector_analysis",
              "company_within_sector",
              "comparative_sector",
              "historical_sector_analysis",
              "sector_validation_data",
              "economic_context",
              "etf_analysis",
              "cross_sector_reference"
            ],
            "description": "Type of relationship to current analysis"
          },
          "file_description": {
            "type": "string",
            "minLength": 10,
            "maxLength": 200,
            "description": "Brief description of file content and relevance"
          },
          "accessibility_verified": {
            "type": "boolean",
            "const": true,
            "description": "Must be true - file accessibility verified"
          },
          "file_type": {
            "type": "string",
            "enum": ["discovery", "analysis", "validation", "report", "data"],
            "description": "Classification of file content type"
          },
          "date_relevance": {
            "type": "string",
            "enum": ["current", "recent", "historical", "comparative"],
            "description": "Temporal relevance classification"
          },
          "sector_specificity": {
            "type": "string",
            "enum": ["sector_focused", "multi_sector", "company_specific", "market_wide"],
            "description": "Scope specificity relative to analysis (sector analysis specific)"
          }
        }
      },
      "description": "Array of discovered relevant files with metadata"
    },
    "search_coverage": {
      "type": "object",
      "description": "Assessment of search completeness and quality",
      "required": [
        "directories_covered",
        "files_evaluated",
        "coverage_completeness",
        "search_confidence"
      ],
      "additionalProperties": false,
      "properties": {
        "directories_covered": {
          "type": "integer",
          "minimum": 2,
          "description": "Number of directories systematically searched"
        },
        "files_evaluated": {
          "type": "integer",
          "minimum": 0,
          "description": "Total number of files evaluated for relevance"
        },
        "coverage_completeness": {
          "type": "number",
          "minimum": 0.8,
          "maximum": 1.0,
          "description": "Assessment of search coverage completeness (minimum 0.8)"
        },
        "search_confidence": {
          "type": "number",
          "minimum": 0.8,
          "maximum": 1.0,
          "description": "Confidence in search methodology and results (minimum 0.8)"
        }
      }
    },
    "relevance_assessment": {
      "type": "object",
      "description": "Quality assessment of discovered file relevance",
      "required": [
        "high_relevance_files",
        "total_relevant_files",
        "average_relevance_score",
        "assessment_methodology"
      ],
      "additionalProperties": false,
      "properties": {
        "high_relevance_files": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of files with relevance score >= 0.9"
        },
        "total_relevant_files": {
          "type": "integer",
          "minimum": 0,
          "description": "Total number of files meeting minimum relevance threshold"
        },
        "average_relevance_score": {
          "type": "number",
          "minimum": 0.7,
          "maximum": 1.0,
          "description": "Average relevance score of all discovered files"
        },
        "assessment_methodology": {
          "type": "string",
          "minLength": 20,
          "description": "Description of relevance scoring methodology"
        }
      }
    }
  }
}
