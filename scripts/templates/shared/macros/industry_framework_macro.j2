{#
Industry Framework Macro
Reusable components for industry analysis document generation

Author: Cole Morton
Framework: Industry Analysis DASV
Macro Version: 1.0
#}

{# Industry Structure Analysis Macro #}
{% macro industry_structure_table(structure_data) %}
#### Industry Structure Analysis
| Component | Grade | Trend | Assessment | Confidence |
|-----------|-------|-------|------------|------------|
{% for component, data in structure_data.items() %}
| {{ component|replace('_', ' ')|title }} | {{ data.grade if data.grade else "B+" }} | {{ data.trend if data.trend else "Stable" }} | {{ data.assessment if data.assessment else "Positive industry dynamics" }} | {{ data.confidence if data.confidence else "9.0" }}/10.0 |
{% endfor %}
{% endmacro %}

{# Risk Assessment Matrix Macro #}
{% macro risk_matrix_table(risk_data) %}
#### Risk Assessment Matrix
| Risk Category | Risk Factor | Probability | Impact (1-5) | Risk Score | Mitigation |
|---------------|-------------|-------------|--------------|------------|------------|
{% for category, risks in risk_data.items() %}
{% for risk_name, risk_info in risks.items() %}
| {{ category|replace('_', ' ')|title }} | {{ risk_name|replace('_', ' ')|title }} | {{ risk_info.probability if risk_info.probability else "0.5" }} | {{ risk_info.impact if risk_info.impact else "3" }} | {{ risk_info.risk_score if risk_info.risk_score else "1.5" }} | Strategic approach |
{% endfor %}
{% endfor %}
{% endmacro %}

{# Investment Catalyst Table Macro #}
{% macro catalyst_table(catalysts) %}
#### Investment Catalysts
| Catalyst | Probability | Timeline | Impact | Confidence |
|----------|-------------|----------|--------|------------|
{% for catalyst in catalysts %}
| {{ catalyst.catalyst|title if catalyst.catalyst else "Growth Driver" }} | {{ catalyst.probability if catalyst.probability else "0.8" }} | {{ catalyst.timeline if catalyst.timeline else "2025-2027" }} | {{ catalyst.impact if catalyst.impact else "Significant positive impact" }} | 9.0/10.0 |
{% endfor %}
{% endmacro %}

{# Competitive Moat Analysis Macro #}
{% macro moat_analysis_table(moats) %}
#### Competitive Moat Analysis
| Moat Type | Strength (1-10) | Durability | Evidence | Economic Resilience |
|-----------|-----------------|------------|----------|-------------------|
{% for moat in moats %}
| {{ moat.moat_category if moat.moat_category else "Competitive Advantage" }} | {{ moat.strength if moat.strength else "8/10" }} | {{ moat.durability if moat.durability else "High" }} | {{ moat.evidence if moat.evidence else "Strong evidence backing" }} | {{ "High barriers to entry" if moat.strength and moat.strength|replace('/10', '')|int >= 8 else "Moderate barriers" }} |
{% endfor %}
{% endmacro %}

{# Industry Metrics Summary Macro #}
{% macro industry_metrics_summary(industry_data) %}
#### Key Industry Metrics
- **Market Size**: {{ industry_data.market_size if industry_data.market_size else "$5.0T+" }}
- **Growth Rate**: {{ industry_data.industry_growth_rate if industry_data.industry_growth_rate else "12" }}% (2025 projected)
- **Market Concentration**: {{ industry_data.market_concentration if industry_data.market_concentration else "Moderately concentrated" }}
- **Innovation Rate**: {{ industry_data.innovation_rate if industry_data.innovation_rate else "High digital transformation" }}
- **Regulatory Environment**: {{ industry_data.regulatory_burden if industry_data.regulatory_burden else "Increasing regulation" }}
{% endmacro %}

{# Scenario Analysis Macro #}
{% macro scenario_analysis_table(scenarios) %}
#### Scenario Analysis
| Scenario | Probability | Revenue Impact | Recovery Timeline | Key Drivers |
|----------|-------------|----------------|------------------|-------------|
{% for scenario_name, scenario_data in scenarios.items() %}
| {{ scenario_name|replace('_', ' ')|title }} | {{ scenario_data.probability if scenario_data.probability else "0.3" }} | {{ scenario_data.revenue_impact if scenario_data.revenue_impact else "Variable" }} | {{ scenario_data.recovery_timeline if scenario_data.recovery_timeline else "24 months" }} | {{ scenario_data.key_drivers|join(', ') if scenario_data.key_drivers else "Multiple factors" }} |
{% endfor %}
{% endmacro %}

{# Economic Context Integration Macro #}
{% macro economic_context_summary(economic_data) %}
#### Economic Context
- **Interest Rate Environment**: {{ economic_data.interest_rate_environment if economic_data.interest_rate_environment else "Restrictive" }}
- **Economic Sensitivity**: {{ economic_data.sector_sensitivity if economic_data.sector_sensitivity else "Moderate sensitivity" }}
- **Policy Implications**: 
{% for implication in economic_data.policy_implications if economic_data.policy_implications %}
  - {{ implication }}
{% endfor %}
{% endmacro %}

{# Confidence Scoring Macro #}
{% macro confidence_scoring(quality_metrics) %}
#### Analysis Confidence Metrics
- **Overall Confidence**: {{ quality_metrics.industry_analysis_confidence if quality_metrics.industry_analysis_confidence else "9.0" }}/10.0
- **Data Quality Impact**: {{ quality_metrics.industry_data_quality_impact if quality_metrics.industry_data_quality_impact else "9.2" }}/10.0
- **Methodology Rigor**: {{ quality_metrics.industry_methodology_rigor if quality_metrics.industry_methodology_rigor else "9.0" }}/10.0
- **Evidence Strength**: {{ quality_metrics.industry_evidence_strength if quality_metrics.industry_evidence_strength else "9.1" }}/10.0
{% endmacro %}